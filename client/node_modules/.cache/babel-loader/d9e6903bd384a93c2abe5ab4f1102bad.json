{"ast":null,"code":"// External libraries are lazy-loaded only if these file types exist.\nvar Yaml = null,\n    VisionmediaYaml = null,\n    Coffee = null,\n    Iced = null,\n    CSON = null,\n    PPARSER = null,\n    JSON5 = null,\n    TOML = null,\n    HJSON = null,\n    XML = null; // Define soft dependencies so transpilers don't include everything\n\nvar COFFEE_2_DEP = 'coffeescript',\n    COFFEE_DEP = 'coffee-script',\n    ICED_DEP = 'iced-coffee-script',\n    JS_YAML_DEP = 'js-yaml',\n    YAML_DEP = 'yaml',\n    JSON5_DEP = 'json5',\n    HJSON_DEP = 'hjson',\n    TOML_DEP = 'toml',\n    CSON_DEP = 'cson',\n    PPARSER_DEP = 'properties',\n    XML_DEP = 'x2js',\n    TS_DEP = 'ts-node';\nvar Parser = module.exports;\n\nParser.parse = function (filename, content) {\n  var parserName = filename.substr(filename.lastIndexOf('.') + 1); // file extension\n\n  if (typeof definitions[parserName] === 'function') {\n    return definitions[parserName](filename, content);\n  } // TODO: decide what to do in case of a missing parser\n\n};\n\nParser.xmlParser = function (filename, content) {\n  if (!XML) {\n    XML = require(XML_DEP);\n  }\n\n  var x2js = new XML();\n  var configObject = x2js.xml2js(content);\n  var rootKeys = Object.keys(configObject);\n\n  if (rootKeys.length === 1) {\n    return configObject[rootKeys[0]];\n  }\n\n  return configObject;\n};\n\nParser.jsParser = function (filename, content) {\n  return require(filename);\n};\n\nParser.tsParser = function (filename, content) {\n  if (!require.extensions['.ts']) {\n    require(TS_DEP).register({\n      lazy: true,\n      compilerOptions: {\n        allowJs: true\n      }\n    });\n  } // Imports config if it is exported via module.exports = ...\n  // See https://github.com/lorenwest/node-config/issues/524\n\n\n  var configObject = require(filename); // Because of ES6 modules usage, `default` is treated as named export (like any other)\n  // Therefore config is a value of `default` key.\n\n\n  if (configObject.default) {\n    return configObject.default;\n  }\n\n  return configObject;\n};\n\nParser.coffeeParser = function (filename, content) {\n  // .coffee files can be loaded with either coffee-script or iced-coffee-script.\n  // Prefer iced-coffee-script, if it exists.\n  // Lazy load the appropriate extension\n  if (!Coffee) {\n    Coffee = {}; // The following enables iced-coffee-script on .coffee files, if iced-coffee-script is available.\n    // This is commented as per a decision on a pull request.\n    //try {\n    //  Coffee = require('iced-coffee-script');\n    //}\n    //catch (e) {\n    //  Coffee = require('coffee-script');\n    //}\n\n    try {\n      // Try to load coffeescript\n      Coffee = require(COFFEE_2_DEP);\n    } catch (e) {\n      // If it doesn't exist, try to load it using the deprecated module name\n      Coffee = require(COFFEE_DEP);\n    } // coffee-script >= 1.7.0 requires explicit registration for require() to work\n\n\n    if (Coffee.register) {\n      Coffee.register();\n    }\n  } // Use the built-in parser for .coffee files with coffee-script\n\n\n  return require(filename);\n};\n\nParser.icedParser = function (filename, content) {\n  Iced = require(ICED_DEP); // coffee-script >= 1.7.0 requires explicit registration for require() to work\n\n  if (Iced.register) {\n    Iced.register();\n  }\n};\n\nParser.yamlParser = function (filename, content) {\n  if (!Yaml && !VisionmediaYaml) {\n    // Lazy loading\n    try {\n      // Try to load the better js-yaml module\n      Yaml = require(JS_YAML_DEP);\n    } catch (e) {\n      try {\n        // If it doesn't exist, load the fallback visionmedia yaml module.\n        VisionmediaYaml = require(YAML_DEP);\n      } catch (e) {}\n    }\n  }\n\n  if (Yaml) {\n    return Yaml.load(content);\n  } else if (VisionmediaYaml) {\n    // The yaml library doesn't like strings that have newlines but don't\n    // end in a newline: https://github.com/visionmedia/js-yaml/issues/issue/13\n    content += '\\n';\n    return VisionmediaYaml.eval(Parser.stripYamlComments(content));\n  } else {\n    console.error('No YAML parser loaded.  Suggest adding js-yaml dependency to your package.json file.');\n  }\n};\n\nParser.jsonParser = function (filename, content) {\n  try {\n    return JSON.parse(content);\n  } catch (e) {\n    // All JS Style comments will begin with /, so all JSON parse errors that\n    // encountered a syntax error will complain about this character.\n    if (e.name !== 'SyntaxError' || e.message.indexOf('Unexpected token /') !== 0) {\n      throw e;\n    }\n\n    if (!JSON5) {\n      JSON5 = require(JSON5_DEP);\n    }\n\n    return JSON5.parse(content);\n  }\n};\n\nParser.json5Parser = function (filename, content) {\n  if (!JSON5) {\n    JSON5 = require(JSON5_DEP);\n  }\n\n  return JSON5.parse(content);\n};\n\nParser.hjsonParser = function (filename, content) {\n  if (!HJSON) {\n    HJSON = require(HJSON_DEP);\n  }\n\n  return HJSON.parse(content);\n};\n\nParser.tomlParser = function (filename, content) {\n  if (!TOML) {\n    TOML = require(TOML_DEP);\n  }\n\n  return TOML.parse(content);\n};\n\nParser.csonParser = function (filename, content) {\n  if (!CSON) {\n    CSON = require(CSON_DEP);\n  } // Allow comments in CSON files\n\n\n  if (typeof CSON.parseSync === 'function') {\n    return CSON.parseSync(Parser.stripComments(content));\n  }\n\n  return CSON.parse(Parser.stripComments(content));\n};\n\nParser.propertiesParser = function (filename, content) {\n  if (!PPARSER) {\n    PPARSER = require(PPARSER_DEP);\n  }\n\n  return PPARSER.parse(content, {\n    namespaces: true,\n    variables: true,\n    sections: true\n  });\n};\n/**\n * Strip all Javascript type comments from the string.\n *\n * The string is usually a file loaded from the O/S, containing\n * newlines and javascript type comments.\n *\n * Thanks to James Padolsey, and all who contributed to this implementation.\n * http://james.padolsey.com/javascript/javascript-comment-removal-revisted/\n *\n * @protected\n * @method stripComments\n * @param fileStr {string} The string to strip comments from\n * @param stringRegex {RegExp} Optional regular expression to match strings that\n *   make up the config file\n * @return {string} The string with comments stripped.\n */\n\n\nParser.stripComments = function (fileStr, stringRegex) {\n  stringRegex = stringRegex || /(['\"])(\\\\\\1|.)+?\\1/g;\n  var uid = '_' + +new Date(),\n      primitives = [],\n      primIndex = 0;\n  return fileStr\n  /* Remove strings */\n  .replace(stringRegex, function (match) {\n    primitives[primIndex] = match;\n    return uid + '' + primIndex++;\n  })\n  /* Remove Regexes */\n  .replace(/([^\\/])(\\/(?!\\*|\\/)(\\\\\\/|.)+?\\/[gim]{0,3})/g, function (match, $1, $2) {\n    primitives[primIndex] = $2;\n    return $1 + (uid + '') + primIndex++;\n  })\n  /*\n  - Remove single-line comments that contain would-be multi-line delimiters\n      E.g. // Comment /* <--\n  - Remove multi-line comments that contain would be single-line delimiters\n      E.g. /* // <--\n  */\n  .replace(/\\/\\/.*?\\/?\\*.+?(?=\\n|\\r|$)|\\/\\*[\\s\\S]*?\\/\\/[\\s\\S]*?\\*\\//g, '')\n  /*\n  Remove single and multi-line comments,\n  no consideration of inner-contents\n  */\n  .replace(/\\/\\/.+?(?=\\n|\\r|$)|\\/\\*[\\s\\S]+?\\*\\//g, '')\n  /*\n  Remove multi-line comments that have a replaced ending (string/regex)\n  Greedy, so no inner strings/regexes will stop it.\n  */\n  .replace(RegExp('\\\\/\\\\*[\\\\s\\\\S]+' + uid + '\\\\d+', 'g'), '')\n  /* Bring back strings & regexes */\n  .replace(RegExp(uid + '(\\\\d+)', 'g'), function (match, n) {\n    return primitives[n];\n  });\n};\n/**\n * Strip YAML comments from the string\n *\n * The 2.0 yaml parser doesn't allow comment-only or blank lines.  Strip them.\n *\n * @protected\n * @method stripYamlComments\n * @param fileStr {string} The string to strip comments from\n * @return {string} The string with comments stripped.\n */\n\n\nParser.stripYamlComments = function (fileStr) {\n  // First replace removes comment-only lines\n  // Second replace removes blank lines\n  return fileStr.replace(/^\\s*#.*/mg, '').replace(/^\\s*[\\n|\\r]+/mg, '');\n};\n\nvar order = ['js', 'ts', 'json', 'json5', 'hjson', 'toml', 'coffee', 'iced', 'yaml', 'yml', 'cson', 'properties', 'xml'];\nvar definitions = {\n  coffee: Parser.coffeeParser,\n  cson: Parser.csonParser,\n  hjson: Parser.hjsonParser,\n  iced: Parser.icedParser,\n  js: Parser.jsParser,\n  json: Parser.jsonParser,\n  json5: Parser.json5Parser,\n  properties: Parser.propertiesParser,\n  toml: Parser.tomlParser,\n  ts: Parser.tsParser,\n  xml: Parser.xmlParser,\n  yaml: Parser.yamlParser,\n  yml: Parser.yamlParser\n};\n\nParser.getParser = function (name) {\n  return definitions[name];\n};\n\nParser.setParser = function (name, parser) {\n  definitions[name] = parser;\n\n  if (order.indexOf(name) === -1) {\n    order.push(name);\n  }\n};\n\nParser.getFilesOrder = function (name) {\n  if (name) {\n    return order.indexOf(name);\n  }\n\n  return order;\n};\n\nParser.setFilesOrder = function (name, newIndex) {\n  if (Array.isArray(name)) {\n    return order = name;\n  }\n\n  if (typeof newIndex === 'number') {\n    var index = order.indexOf(name);\n    order.splice(newIndex, 0, name);\n\n    if (index > -1) {\n      order.splice(index >= newIndex ? index + 1 : index, 1);\n    }\n  }\n\n  return order;\n};","map":{"version":3,"sources":["C:/Users/kevin/Documents/Web Development Projects/Contact-Keeper-/node_modules/config/parser.js"],"names":["Yaml","VisionmediaYaml","Coffee","Iced","CSON","PPARSER","JSON5","TOML","HJSON","XML","COFFEE_2_DEP","COFFEE_DEP","ICED_DEP","JS_YAML_DEP","YAML_DEP","JSON5_DEP","HJSON_DEP","TOML_DEP","CSON_DEP","PPARSER_DEP","XML_DEP","TS_DEP","Parser","module","exports","parse","filename","content","parserName","substr","lastIndexOf","definitions","xmlParser","require","x2js","configObject","xml2js","rootKeys","Object","keys","length","jsParser","tsParser","extensions","register","lazy","compilerOptions","allowJs","default","coffeeParser","e","icedParser","yamlParser","load","eval","stripYamlComments","console","error","jsonParser","JSON","name","message","indexOf","json5Parser","hjsonParser","tomlParser","csonParser","parseSync","stripComments","propertiesParser","namespaces","variables","sections","fileStr","stringRegex","uid","Date","primitives","primIndex","replace","match","$1","$2","RegExp","n","order","coffee","cson","hjson","iced","js","json","json5","properties","toml","ts","xml","yaml","yml","getParser","setParser","parser","push","getFilesOrder","setFilesOrder","newIndex","Array","isArray","index","splice"],"mappings":"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","sourcesContent":["// External libraries are lazy-loaded only if these file types exist.\nvar Yaml = null,\n    VisionmediaYaml = null,\n    Coffee = null,\n    Iced = null,\n    CSON = null,\n    PPARSER = null,\n    JSON5 = null,\n    TOML = null,\n    HJSON = null,\n    XML = null;\n\n// Define soft dependencies so transpilers don't include everything\nvar COFFEE_2_DEP = 'coffeescript',\n    COFFEE_DEP = 'coffee-script',\n    ICED_DEP = 'iced-coffee-script',\n    JS_YAML_DEP = 'js-yaml',\n    YAML_DEP = 'yaml',\n    JSON5_DEP = 'json5',\n    HJSON_DEP = 'hjson',\n    TOML_DEP = 'toml',\n    CSON_DEP = 'cson',\n    PPARSER_DEP = 'properties',\n    XML_DEP = 'x2js',\n    TS_DEP = 'ts-node';\n\nvar Parser = module.exports;\n\nParser.parse = function(filename, content) {\n  var parserName = filename.substr(filename.lastIndexOf('.') +1);  // file extension\n  if (typeof definitions[parserName] === 'function') {\n    return definitions[parserName](filename, content);\n  }\n  // TODO: decide what to do in case of a missing parser\n};\n\nParser.xmlParser = function(filename, content) {\n  if (!XML) {\n    XML = require(XML_DEP);\n  }\n  var x2js = new XML();\n  var configObject = x2js.xml2js(content);\n  var rootKeys = Object.keys(configObject);\n  if(rootKeys.length === 1) {\n    return configObject[rootKeys[0]];\n  }\n  return configObject;\n};\n\nParser.jsParser = function(filename, content) {\n  return require(filename);\n};\n\nParser.tsParser = function(filename, content) {\n  if (!require.extensions['.ts']) {\n    require(TS_DEP).register({\n      lazy: true,\n      compilerOptions: {\n        allowJs: true,\n      }\n    });\n  }\n\n  // Imports config if it is exported via module.exports = ...\n  // See https://github.com/lorenwest/node-config/issues/524\n  var configObject = require(filename);\n\n  // Because of ES6 modules usage, `default` is treated as named export (like any other)\n  // Therefore config is a value of `default` key.\n  if (configObject.default) {\n    return configObject.default\n  }\n  return configObject;\n};\n\nParser.coffeeParser = function(filename, content) {\n  // .coffee files can be loaded with either coffee-script or iced-coffee-script.\n  // Prefer iced-coffee-script, if it exists.\n  // Lazy load the appropriate extension\n  if (!Coffee) {\n    Coffee = {};\n\n    // The following enables iced-coffee-script on .coffee files, if iced-coffee-script is available.\n    // This is commented as per a decision on a pull request.\n    //try {\n    //  Coffee = require('iced-coffee-script');\n    //}\n    //catch (e) {\n    //  Coffee = require('coffee-script');\n    //}\n    try {\n      // Try to load coffeescript\n      Coffee = require(COFFEE_2_DEP);\n    }\n    catch (e) {\n      // If it doesn't exist, try to load it using the deprecated module name\n      Coffee = require(COFFEE_DEP);\n    }\n    // coffee-script >= 1.7.0 requires explicit registration for require() to work\n    if (Coffee.register) {\n      Coffee.register();\n    }\n  }\n  // Use the built-in parser for .coffee files with coffee-script\n  return require(filename);\n};\n\nParser.icedParser = function(filename, content) {\n  Iced = require(ICED_DEP);\n\n  // coffee-script >= 1.7.0 requires explicit registration for require() to work\n  if (Iced.register) {\n    Iced.register();\n  }\n};\n\nParser.yamlParser = function(filename, content) {\n  if (!Yaml && !VisionmediaYaml) {\n    // Lazy loading\n    try {\n      // Try to load the better js-yaml module\n      Yaml = require(JS_YAML_DEP);\n    }\n    catch (e) {\n      try {\n        // If it doesn't exist, load the fallback visionmedia yaml module.\n        VisionmediaYaml = require(YAML_DEP);\n      }\n      catch (e) { }\n    }\n  }\n  if (Yaml) {\n    return Yaml.load(content);\n  }\n  else if (VisionmediaYaml) {\n    // The yaml library doesn't like strings that have newlines but don't\n    // end in a newline: https://github.com/visionmedia/js-yaml/issues/issue/13\n    content += '\\n';\n    return VisionmediaYaml.eval(Parser.stripYamlComments(content));\n  }\n  else {\n    console.error('No YAML parser loaded.  Suggest adding js-yaml dependency to your package.json file.')\n  }\n};\n\nParser.jsonParser = function(filename, content) {\n  try {\n    return JSON.parse(content);\n  }\n  catch (e) {\n    // All JS Style comments will begin with /, so all JSON parse errors that\n    // encountered a syntax error will complain about this character.\n    if (e.name !== 'SyntaxError' || e.message.indexOf('Unexpected token /') !== 0) {\n      throw e;\n    }\n    if (!JSON5) {\n      JSON5 = require(JSON5_DEP);\n    }\n    return JSON5.parse(content);\n  }\n};\n\nParser.json5Parser = function(filename, content) {\n  if (!JSON5) {\n    JSON5 = require(JSON5_DEP);\n  }\n  return JSON5.parse(content);\n};\n\nParser.hjsonParser = function(filename, content) {\n  if (!HJSON) {\n    HJSON = require(HJSON_DEP);\n  }\n  return HJSON.parse(content);\n};\n\nParser.tomlParser = function(filename, content) {\n  if(!TOML) {\n    TOML = require(TOML_DEP);\n  }\n  return TOML.parse(content);\n};\n\nParser.csonParser = function(filename, content) {\n  if (!CSON) {\n    CSON = require(CSON_DEP);\n  }\n  // Allow comments in CSON files\n  if (typeof CSON.parseSync === 'function') {\n    return CSON.parseSync(Parser.stripComments(content));\n  }\n  return CSON.parse(Parser.stripComments(content));\n};\n\nParser.propertiesParser = function(filename, content) {\n  if (!PPARSER) {\n    PPARSER = require(PPARSER_DEP);\n  }\n  return PPARSER.parse(content, { namespaces: true, variables: true, sections: true });\n};\n\n/**\n * Strip all Javascript type comments from the string.\n *\n * The string is usually a file loaded from the O/S, containing\n * newlines and javascript type comments.\n *\n * Thanks to James Padolsey, and all who contributed to this implementation.\n * http://james.padolsey.com/javascript/javascript-comment-removal-revisted/\n *\n * @protected\n * @method stripComments\n * @param fileStr {string} The string to strip comments from\n * @param stringRegex {RegExp} Optional regular expression to match strings that\n *   make up the config file\n * @return {string} The string with comments stripped.\n */\nParser.stripComments = function(fileStr, stringRegex) {\n  stringRegex = stringRegex || /(['\"])(\\\\\\1|.)+?\\1/g;\n\n  var uid = '_' + +new Date(),\n    primitives = [],\n    primIndex = 0;\n\n  return (\n    fileStr\n\n    /* Remove strings */\n      .replace(stringRegex, function(match){\n        primitives[primIndex] = match;\n        return (uid + '') + primIndex++;\n      })\n\n      /* Remove Regexes */\n      .replace(/([^\\/])(\\/(?!\\*|\\/)(\\\\\\/|.)+?\\/[gim]{0,3})/g, function(match, $1, $2){\n        primitives[primIndex] = $2;\n        return $1 + (uid + '') + primIndex++;\n      })\n\n      /*\n      - Remove single-line comments that contain would-be multi-line delimiters\n          E.g. // Comment /* <--\n      - Remove multi-line comments that contain would be single-line delimiters\n          E.g. /* // <--\n     */\n      .replace(/\\/\\/.*?\\/?\\*.+?(?=\\n|\\r|$)|\\/\\*[\\s\\S]*?\\/\\/[\\s\\S]*?\\*\\//g, '')\n\n      /*\n      Remove single and multi-line comments,\n      no consideration of inner-contents\n     */\n      .replace(/\\/\\/.+?(?=\\n|\\r|$)|\\/\\*[\\s\\S]+?\\*\\//g, '')\n\n      /*\n      Remove multi-line comments that have a replaced ending (string/regex)\n      Greedy, so no inner strings/regexes will stop it.\n     */\n      .replace(RegExp('\\\\/\\\\*[\\\\s\\\\S]+' + uid + '\\\\d+', 'g'), '')\n\n      /* Bring back strings & regexes */\n      .replace(RegExp(uid + '(\\\\d+)', 'g'), function(match, n){\n        return primitives[n];\n      })\n  );\n\n};\n\n/**\n * Strip YAML comments from the string\n *\n * The 2.0 yaml parser doesn't allow comment-only or blank lines.  Strip them.\n *\n * @protected\n * @method stripYamlComments\n * @param fileStr {string} The string to strip comments from\n * @return {string} The string with comments stripped.\n */\nParser.stripYamlComments = function(fileStr) {\n  // First replace removes comment-only lines\n  // Second replace removes blank lines\n  return fileStr.replace(/^\\s*#.*/mg,'').replace(/^\\s*[\\n|\\r]+/mg,'');\n};\n\nvar order = ['js', 'ts', 'json', 'json5', 'hjson', 'toml', 'coffee', 'iced', 'yaml', 'yml', 'cson', 'properties', 'xml'];\nvar definitions = {\n  coffee: Parser.coffeeParser,\n  cson: Parser.csonParser,\n  hjson: Parser.hjsonParser,\n  iced: Parser.icedParser,\n  js: Parser.jsParser,\n  json: Parser.jsonParser,\n  json5: Parser.json5Parser,\n  properties: Parser.propertiesParser,\n  toml: Parser.tomlParser,\n  ts: Parser.tsParser,\n  xml: Parser.xmlParser,\n  yaml: Parser.yamlParser,\n  yml: Parser.yamlParser,\n};\n\nParser.getParser = function(name) {\n  return definitions[name];\n};\n\nParser.setParser = function(name, parser) {\n  definitions[name] = parser;\n  if (order.indexOf(name) === -1) {\n    order.push(name);\n  }\n};\n\nParser.getFilesOrder = function(name) {\n  if (name) {\n    return order.indexOf(name);\n  }\n  return order;\n};\n\nParser.setFilesOrder = function(name, newIndex) {\n  if (Array.isArray(name)) {\n    return order = name;\n  }\n  if (typeof newIndex === 'number') {\n    var index = order.indexOf(name);\n    order.splice(newIndex, 0, name);\n    if (index > -1) {\n      order.splice(index >= newIndex ? index +1 : index, 1);\n    }\n  }\n  return order;\n};\n"]},"metadata":{},"sourceType":"script"}